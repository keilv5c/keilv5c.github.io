<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®—æ³•æ€æƒ³çš„â€œç§»æ¤â€ï¼šå°±åœ°åè½¬çš„é™·é˜±ä¸åˆ†æ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: æœ¬åº”ç”¨é‡‡ç”¨äº†ä¸€ç§å¼•å¯¼å¼å­¦ä¹ çš„å™äº‹ç»“æ„ï¼Œè€Œéç®€å•å¤åˆ»æŠ¥å‘Šç« èŠ‚ã€‚å®ƒä»â€œé—®é¢˜å¼•å…¥â€å¼€å§‹ï¼Œå¼•å¯¼ç”¨æˆ·è¿›å…¥æ ¸å¿ƒçš„â€œäº¤äº’å¼æ¨¡æ‹Ÿâ€ç¯èŠ‚ï¼Œåœ¨è¿™é‡Œç”¨æˆ·å¯ä»¥äº²æ‰‹æ“ä½œå¹¶è§‚å¯Ÿä¸åŒç®—æ³•çš„æ€§èƒ½å·®å¼‚ã€‚éšåï¼Œâ€œæ ¹æœ¬åŸå› åˆ†æâ€éƒ¨åˆ†é€šè¿‡å›¾æ–‡ç»“åˆè§£é‡Šäº†æ€§èƒ½å·®å¼‚çš„ç†è®ºåŸºç¡€ï¼Œæœ€åæä¾›â€œä»£ç å®ç°â€ä¾›æ·±å…¥ç ”ç©¶ã€‚è¿™ç§ç»“æ„æ—¨åœ¨å°†é™æ€çš„çŸ¥è¯†è½¬åŒ–ä¸ºåŠ¨æ€çš„æ¢ç´¢ä½“éªŒï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡â€œæ“ä½œ-è§‚å¯Ÿ-ç†è§£â€çš„é—­ç¯ï¼Œæ·±åˆ»é¢†ä¼šæ•°æ®ç»“æ„å¯¹ç®—æ³•æ•ˆç‡çš„å†³å®šæ€§ä½œç”¨ï¼Œä»è€Œè¾¾åˆ°æ¯”é˜…è¯»é™æ€æŠ¥å‘Šæ›´å¥½çš„æ•™å­¦æ•ˆæœã€‚ -->
    <!-- Visualization & Content Choices: æŠ¥å‘Šä¸­çš„æ ¸å¿ƒä¿¡æ¯æ˜¯ä¸‰ç§åè½¬æ–¹æ¡ˆçš„æ•ˆç‡å¯¹æ¯”ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ä»¥ä¸‹å¯è§†åŒ–å’Œäº¤äº’æ–¹å¼ï¼š[ç›®æ ‡ï¼šæ¯”è¾ƒ] -> [å¯è§†åŒ–æ–¹å¼ï¼šåŠ¨æ€æ¡å½¢å›¾ (Chart.js) + æ¨¡æ‹ŸåŠ¨ç”» (HTML/CSS/JS)] -> [äº¤äº’ï¼šç”¨æˆ·å¯é€šè¿‡æ»‘å—æ§åˆ¶æ•°æ®è§„æ¨¡(n)ï¼Œç‚¹å‡»æŒ‰é’®è§¦å‘æ¨¡æ‹Ÿ] -> [ç†ç”±ï¼šåŠ¨æ€å›¾è¡¨èƒ½å°†æŠ½è±¡çš„O(n)å’ŒO(n^2)å¤æ‚åº¦å·®å¼‚ï¼Œé‡åŒ–ä¸ºå¯è§çš„æŸ±çŠ¶å›¾é«˜åº¦å·®å¼‚ï¼›æ¨¡æ‹ŸåŠ¨ç”»åˆ™ç›´è§‚åœ°å±•ç¤ºäº†æ¯ç§ç®—æ³•çš„æ“ä½œæ­¥éª¤ï¼Œç‰¹åˆ«æ˜¯æ–¹æ¡ˆä¸‰ä¸­ä½æ•ˆçš„é‡å¤æŸ¥æ‰¾è¿‡ç¨‹ï¼Œä½¿ç”¨æˆ·â€œçœ¼è§ä¸ºå®â€ã€‚] [ç›®æ ‡ï¼šå‘ŠçŸ¥] -> [å¯è§†åŒ–æ–¹å¼ï¼šç»“æ„åŒ–çš„HTMLæ–‡æœ¬å’Œé™æ€ç¤ºæ„å›¾] -> [ç†ç”±ï¼šæ¸…æ™°åœ°å‘ˆç°é—®é¢˜æè¿°ã€æ–¹æ¡ˆåˆ†æå’Œç»“è®ºï¼Œä½œä¸ºäº¤äº’æ¨¡æ‹Ÿçš„ç†è®ºæ”¯æ’‘ã€‚] æ‰€æœ‰å›¾è¡¨å’ŒåŠ¨ç”»å‡ä½¿ç”¨Canvaså’ŒHTML/CSSå®ç°ï¼Œç¡®ä¿ç¬¦åˆæ— SVG/Mermaidçš„è¦æ±‚ã€‚ -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #fdfaf6;
            color: #4a4a4a;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .data-node, .data-item {
            transition: all 0.3s ease-in-out;
            border-radius: 0.375rem;
        }
        .highlight-swap {
            transform: scale(1.1);
            background-color: #f59e0b !important;
            color: white !important;
        }
        .highlight-scan {
            background-color: #3b82f6 !important;
            color: white !important;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.7);
        }
        .connector {
            position: absolute;
            height: 2px;
            background-color: #9ca3af;
            transform-origin: left center;
        }
        .arrow-head {
            position: absolute;
            right: -1px;
            top: -4px;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
            border-left: 7px solid #9ca3af;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pill {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 500;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-amber-900">ç®—æ³•æ€æƒ³çš„â€œç§»æ¤â€</h1>
            <p class="text-lg md:text-xl mt-2 text-gray-600">å¯è§†åŒ–åˆ†æï¼šå°±åœ°åè½¬çš„æ•ˆç‡é™·é˜±</p>
        </header>

        <section id="intro" class="mb-16 bg-white/50 p-6 rounded-2xl shadow-sm border border-gray-200/80">
            <h2 class="text-2xl font-bold text-amber-800 mb-4">1. é—®é¢˜èƒŒæ™¯</h2>
            <p class="text-gray-700 leading-relaxed">
                åœ¨ç®—æ³•è®¾è®¡ä¸­ï¼Œä¸€ä¸ªæ ¸å¿ƒä»»åŠ¡æ˜¯å°†ç»™å®šçš„çº¿æ€§è¡¨ï¼ˆå¦‚æ•°ç»„æˆ–é“¾è¡¨ï¼‰ä¸­çš„å…ƒç´ é¡ºåºè¿›è¡Œâ€œå°±åœ°åè½¬â€ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨ä¸ä½¿ç”¨é¢å¤–æ•°æ®ç»“æ„ï¼ˆå³ O(1) ç©ºé—´å¤æ‚åº¦ï¼‰çš„æƒ…å†µä¸‹å®Œæˆåè½¬ã€‚ä¾‹å¦‚ï¼Œå°† `[1, 2, 3, 4, 5, 6]` å˜ä¸º `[6, 5, 4, 3, 2, 1]`ã€‚è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆé«˜åº¦ä¾èµ–äºåº•å±‚æ•°æ®ç»“æ„çš„ç‰¹æ€§ã€‚å°†é€‚ç”¨äºä¸€ç§æ•°æ®ç»“æ„çš„é«˜æ•ˆç®—æ³•æ€æƒ³ï¼Œä¸åŠ æ€è€ƒåœ°â€œç§»æ¤â€åˆ°å¦ä¸€ç§ç»“æ„ä¸Šï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œå½¢æˆä¸€ä¸ªâ€œæ•ˆç‡é™·é˜±â€ã€‚æœ¬åº”ç”¨å°†å¸¦æ‚¨ç›´è§‚åœ°æ¢ç´¢è¿™ä¸ªè¿‡ç¨‹ã€‚
            </p>
        </section>

        <section id="simulation" class="mb-16">
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-gray-200/80">
                <h2 class="text-2xl font-bold text-amber-800 mb-2 text-center">2. äº¤äº’å¼æ¨¡æ‹Ÿï¼šçœ¼è§ä¸ºå®</h2>
                <p class="text-center text-gray-600 mb-6">é€šè¿‡è°ƒæ•´ä¸‹æ–¹çš„æ»‘å—æ¥æ”¹å˜æ•°æ®è§„æ¨¡ (n)ï¼Œç„¶åç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œè§‚å¯Ÿä¸åŒç®—æ³•çš„æ‰§è¡ŒåŠ¨ç”»å’Œæ€§èƒ½å¯¹æ¯”ã€‚</p>

                <div class="mb-8 flex flex-col sm:flex-row items-center justify-center gap-4">
                    <label for="data-size" class="font-medium text-gray-700">æ•°æ®è§„æ¨¡ (n): <span id="data-size-value" class="font-bold text-blue-600 w-12 inline-block text-center">10</span></label>
                    <input id="data-size" type="range" min="4" max="20" value="10" class="w-full max-w-xs cursor-pointer">
                </div>
                
                <div id="visualizations" class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8 min-h-[180px]">
                    
                    <div id="algo1-container" class="border p-4 rounded-lg bg-gray-50">
                        <h3 class="font-bold text-center mb-2">æ–¹æ¡ˆä¸€ï¼šé¡ºåºè¡¨ (é¦–å°¾äº¤æ¢æ³•)</h3>
                        <div id="vis-algo1" class="flex flex-wrap justify-center items-center gap-2 min-h-[100px]"></div>
                        <p class="text-center mt-2 text-sm text-gray-500">å¤æ‚åº¦: <span class="font-mono pill bg-green-100 text-green-800">O(n)</span></p>
                    </div>

                    <div id="algo2-container" class="border p-4 rounded-lg bg-gray-50">
                        <h3 class="font-bold text-center mb-2">æ–¹æ¡ˆäºŒï¼šå•é“¾è¡¨ (æŒ‡é’ˆåè½¬æ³•)</h3>
                        <div id="vis-algo2" class="flex flex-wrap justify-center items-center gap-y-4 relative min-h-[100px] py-2"></div>
                        <p class="text-center mt-2 text-sm text-gray-500">å¤æ‚åº¦: <span class="font-mono pill bg-green-100 text-green-800">O(n)</span></p>
                    </div>

                    <div id="algo3-container" class="border p-4 rounded-lg bg-gray-50">
                        <h3 class="font-bold text-center mb-2">æ–¹æ¡ˆä¸‰ï¼šå•é“¾è¡¨ (â€œé™·é˜±â€äº¤æ¢æ³•)</h3>
                         <div id="vis-algo3" class="flex flex-wrap justify-center items-center gap-y-4 relative min-h-[100px] py-2"></div>
                        <p class="text-center mt-2 text-sm text-gray-500">å¤æ‚åº¦: <span class="font-mono pill bg-red-100 text-red-800">O(n<sup>2</sup>)</span></p>
                    </div>
                </div>

                <div class="text-center mb-8">
                    <button id="run-button" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors shadow-md disabled:bg-gray-400 disabled:cursor-not-allowed">
                        å¯åŠ¨å…¨éƒ¨æ¨¡æ‹Ÿ
                    </button>
                </div>
                
                <div>
                     <h3 class="text-xl font-bold text-center text-amber-800 mb-4">æ€§èƒ½é‡åŒ–å¯¹æ¯” (æ“ä½œè®¡æ•°)</h3>
                     <div class="chart-container">
                        <canvas id="performance-chart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="analysis" class="mb-16 bg-white/50 p-6 rounded-2xl shadow-sm border border-gray-200/80">
            <h2 class="text-2xl font-bold text-amber-800 mb-4">3. æ ¹æœ¬åŸå› åˆ†æï¼šä¸ºä½•æ–¹æ¡ˆä¸‰æ˜¯â€œé™·é˜±â€ï¼Ÿ</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="font-semibold text-lg mb-2 text-green-700">âœ“ é«˜æ•ˆçš„æ ¸å¿ƒï¼šO(1) éšæœºå­˜å–</h3>
                    <p class="text-gray-700 mb-4">é¡ºåºè¡¨ï¼ˆå¦‚ Python çš„ listï¼‰åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡ç´¢å¼•ç›´æ¥è®¡ç®—å‡ºä»»ä½•å…ƒç´ çš„å†…å­˜åœ°å€ï¼Œå®ç°ç¬æ—¶è®¿é—®ã€‚æ“ä½œ `arr[i]` çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚æ–¹æ¡ˆä¸€æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸€ç‰¹æ€§ï¼Œæ¯æ¬¡éƒ½èƒ½é«˜æ•ˆåœ°å®šä½å¹¶äº¤æ¢é¦–å°¾å…ƒç´ ã€‚</p>
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
                        <p class="font-mono">arr[i] â  ç›´æ¥å®šä½</p>
                        <p class="text-2xl mt-2">âš¡ï¸</p>
                        <p class="font-medium">ç¬æ—¶è®¿é—®</p>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-lg mb-2 text-red-700">âœ— ä½æ•ˆçš„æ ¹æºï¼šO(k) é¡ºåºæŸ¥æ‰¾</h3>
                    <p class="text-gray-700 mb-4">å•é“¾è¡¨çš„èŠ‚ç‚¹åœ¨å†…å­˜ä¸­æ˜¯åˆ†æ•£çš„ï¼Œåªèƒ½é€šè¿‡ `next` æŒ‡é’ˆä¸²è”ã€‚è¦æ‰¾åˆ°ç¬¬ `k` ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½ä»å¤´ç»“ç‚¹å¼€å§‹ï¼Œä¸€æ­¥ä¸€æ­¥åœ°å‘åéå† `k` æ¬¡ã€‚æ“ä½œ `get_elem(k)` çš„æ—¶é—´å¤æ‚åº¦ä¸º O(k)ã€‚æ–¹æ¡ˆä¸‰å¼ºè¡Œâ€œç§»æ¤â€é¦–å°¾äº¤æ¢æ€æƒ³ï¼Œåœ¨æ¯ä¸€è½®äº¤æ¢ä¸­ï¼Œéƒ½éœ€è¦è¿›è¡Œä¸¤æ¬¡ï¼ˆä¸€æ¬¡ O(k)ï¼Œä¸€æ¬¡ O(n-k)ï¼‰è¿™æ ·ä½æ•ˆçš„ä»å¤´æŸ¥æ‰¾ï¼Œå¯¼è‡´æ€»å¤æ‚åº¦é£™å‡è‡³ O(n<sup>2</sup>)ã€‚</p>
                     <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                        <p class="font-mono">get_elem(k) â  ä»å¤´éå† k æ­¥</p>
                        <p class="text-2xl mt-2">ğŸŒ</p>
                        <p class="font-medium">é¡ºåºæŸ¥æ‰¾</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 pt-6 border-t border-gray-300/60">
                <h3 class="text-xl font-bold text-amber-800 mb-3 text-center">ç»“è®º</h3>
                <p class="text-gray-700 leading-relaxed max-w-3xl mx-auto text-center">
                    æ•°æ®ç»“æ„ä¸ç®—æ³•æ€æƒ³å¿…é¡»åŒ¹é…ã€‚æ–¹æ¡ˆäºŒçš„â€œæŒ‡é’ˆåè½¬æ³•â€é¡ºåº”äº†é“¾è¡¨â€œä¿®æ”¹æŒ‡é’ˆâ€çš„ä¾¿æ·ç‰¹æ€§ï¼Œæ˜¯è§£å†³é“¾è¡¨åè½¬çš„æ­£ç¡®æ€è·¯ã€‚è€Œæ–¹æ¡ˆä¸‰çš„â€œé™·é˜±â€åˆ™æ˜¯ä¸€ä¸ªå…¸å‹åä¾‹ï¼Œå®ƒæ·±åˆ»åœ°æ­ç¤ºäº†ï¼š<strong class="text-amber-900">è„±ç¦»æ•°æ®ç»“æ„ç‰¹æ€§è€Œç©ºè°ˆç®—æ³•æ€æƒ³ï¼Œæ˜¯å¯¼è‡´ä½æ•ˆè®¾è®¡çš„æ ¹æºã€‚</strong>
                </p>
            </div>
        </section>

        <section id="code" class="bg-white/50 p-6 rounded-2xl shadow-sm border border-gray-200/80">
            <h2 class="text-2xl font-bold text-amber-800 mb-4">4. æ ¸å¿ƒä»£ç å®ç°</h2>
            <div class="space-y-4">
                <details class="bg-gray-50 p-4 rounded-lg group">
                    <summary class="font-medium text-gray-800 flex justify-between items-center cursor-pointer">
                        <span>æ–¹æ¡ˆä¸€ï¼šé¡ºåºè¡¨ - â€œé¦–å°¾äº¤æ¢æ³•â€</span>
                    </summary>
                    <pre class="bg-gray-800 text-white p-4 rounded-md mt-4 overflow-x-auto text-sm"><code>def reverse_list_sequential(arr):
    left, right = 0, len(arr) - 1
    while left < right:
        arr[left], arr[right] = arr[right], arr[left]
        left += 1
        right -= 1
    return arr</code></pre>
                </details>
                <details class="bg-gray-50 p-4 rounded-lg group">
                    <summary class="font-medium text-gray-800 flex justify-between items-center cursor-pointer">
                        <span>æ–¹æ¡ˆäºŒï¼šå•é“¾è¡¨ - â€œæŒ‡é’ˆåè½¬æ³•â€</span>
                    </summary>
                    <pre class="bg-gray-800 text-white p-4 rounded-md mt-4 overflow-x-auto text-sm"><code>def reverse_efficient(self):
    prev = None
    curr = self.head.next
    while curr:
        next_temp = curr.next
        curr.next = prev
        prev = curr
        curr = next_temp
    self.head.next = prev</code></pre>
                </details>
                <details class="bg-gray-50 p-4 rounded-lg group">
                    <summary class="font-medium text-gray-800 flex justify-between items-center cursor-pointer">
                       <span>æ–¹æ¡ˆä¸‰ï¼šå•é“¾è¡¨ - â€œé™·é˜±æ³•â€</span>
                    </summary>
                    <pre class="bg-gray-800 text-white p-4 rounded-md mt-4 overflow-x-auto text-sm"><code>def reverse_inefficient_trap(self):
    n = len(self)
    left_idx = 1
    right_idx = n
    while left_idx < right_idx:
        node_left = self.get_elem(left_idx)
        node_right = self.get_elem(right_idx)
        node_left.data, node_right.data = node_right.data, node_left.data
        left_idx += 1
        right_idx -= 1</code></pre>
                </details>
            </div>
        </section>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const sizeSlider = document.getElementById('data-size');
        const sizeValue = document.getElementById('data-size-value');
        const runButton = document.getElementById('run-button');
        const visAlgo1 = document.getElementById('vis-algo1');
        const visAlgo2 = document.getElementById('vis-algo2');
        const visAlgo3 = document.getElementById('vis-algo3');
        const chartCanvas = document.getElementById('performance-chart');

        let dataSize = parseInt(sizeSlider.value);
        let chart;
        let animationRunning = false;
        
        const ANIMATION_DELAY = 150;

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        function createDataItems(n) {
            visAlgo1.innerHTML = '';
            for (let i = 1; i <= n; i++) {
                const item = document.createElement('div');
                item.textContent = i;
                item.className = 'data-item w-10 h-10 flex items-center justify-center font-bold bg-blue-100 text-blue-800 border-2 border-blue-200';
                item.id = `item-1-${i-1}`;
                visAlgo1.appendChild(item);
            }
        }

        function createLinkedList(container, n, prefix) {
            container.innerHTML = '';
            
            for (let i = 1; i <= n; i++) {
                const itemWrapper = document.createElement('div');
                itemWrapper.className = 'flex items-center';

                const node = document.createElement('div');
                node.textContent = i;
                node.className = 'data-node w-10 h-10 flex-shrink-0 flex items-center justify-center font-bold bg-indigo-100 text-indigo-800 border-2 border-indigo-200 z-10';
                node.id = `${prefix}-${i-1}`;
                itemWrapper.appendChild(node);

                if (i < n) {
                    const connector = document.createElement('div');
                    connector.className = 'w-6 h-full flex items-center relative transition-transform duration-300';
                    connector.id = `connector-${prefix}-${i-1}`;
                    
                    const line = document.createElement('div');
                    line.className = 'h-0.5 w-full bg-gray-400';
                    connector.appendChild(line);

                    const arrow = document.createElement('div');
                    arrow.className = 'absolute right-0 top-1/2 -mt-1.5 w-0 h-0 border-t-[6px] border-b-[6px] border-l-[8px] border-t-transparent border-b-transparent border-l-gray-400';
                    connector.appendChild(arrow);
                    itemWrapper.appendChild(connector);
                }
                container.appendChild(itemWrapper);
            }
        }

        function setupVisualizations() {
            createDataItems(dataSize);
            createLinkedList(visAlgo2, dataSize, 'node-2');
            createLinkedList(visAlgo3, dataSize, 'node-3');
        }

        function createChart() {
            const ctx = chartCanvas.getContext('2d');
            if (chart) {
                chart.destroy();
            }
            chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['æ–¹æ¡ˆä¸€ O(n)', 'æ–¹æ¡ˆäºŒ O(n)', 'æ–¹æ¡ˆä¸‰ O(nÂ²)'],
                    datasets: [{
                        label: 'ç›¸å¯¹æ“ä½œè®¡æ•°',
                        data: [0, 0, 0],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.6)',
                            'rgba(79, 70, 229, 0.6)',
                            'rgba(239, 68, 68, 0.6)'
                        ],
                        borderColor: [
                            'rgba(34, 197, 94, 1)',
                            'rgba(79, 70, 229, 1)',
                            'rgba(239, 68, 68, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'æ“ä½œæ¬¡æ•°'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `æ“ä½œæ¬¡æ•°: ${context.raw}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        async function runAlgo1() {
            let operations = 0;
            let left = 0;
            let right = dataSize - 1;
            const items = visAlgo1.children;

            while (left < right) {
                operations++;
                const leftItem = items[left];
                const rightItem = items[right];
                
                leftItem.classList.add('highlight-swap');
                rightItem.classList.add('highlight-swap');
                await sleep(ANIMATION_DELAY * 2);

                [leftItem.textContent, rightItem.textContent] = [rightItem.textContent, leftItem.textContent];
                
                await sleep(ANIMATION_DELAY);
                leftItem.classList.remove('highlight-swap');
                rightItem.classList.remove('highlight-swap');

                left++;
                right--;
                await sleep(ANIMATION_DELAY);
            }
            return operations;
        }
        
        async function runAlgo2() {
            let operations = 0;
            let n = dataSize;
            for(let i=0; i < n; i++){
                operations++;
                const node = document.getElementById(`node-2-${i}`);
                node.classList.add('highlight-scan');
                await sleep(ANIMATION_DELAY/2);
                 if (i > 0) {
                    const connector = document.getElementById(`connector-node-2-${i-1}`);
                    if (connector) {
                        connector.style.transform = 'rotate(180deg)';
                    }
                }
                await sleep(ANIMATION_DELAY/2);
                node.classList.remove('highlight-scan');
            }
            return operations;
        }

        async function runAlgo3() {
            let operations = 0;
            let left_idx = 0;
            let right_idx = dataSize - 1;

            while (left_idx < right_idx) {
                const leftNode = document.getElementById(`node-3-${left_idx}`);
                const rightNode = document.getElementById(`node-3-${right_idx}`);

                for (let i = 0; i <= left_idx; i++) {
                    operations++;
                    const node = document.getElementById(`node-3-${i}`);
                    node.classList.add('highlight-scan');
                    await sleep(ANIMATION_DELAY / 2);
                    node.classList.remove('highlight-scan');
                }
                leftNode.classList.add('highlight-swap');

                for (let i = 0; i <= right_idx; i++) {
                    operations++;
                    const node = document.getElementById(`node-3-${i}`);
                    node.classList.add('highlight-scan');
                    await sleep(ANIMATION_DELAY / 2);
                    node.classList.remove('highlight-scan');
                }
                rightNode.classList.add('highlight-swap');
                
                await sleep(ANIMATION_DELAY * 2);
                [leftNode.textContent, rightNode.textContent] = [rightNode.textContent, leftNode.textContent];

                await sleep(ANIMATION_DELAY);
                leftNode.classList.remove('highlight-swap');
                rightNode.classList.remove('highlight-swap');

                left_idx++;
                right_idx--;
            }
            return operations;
        }

        async function runAllSimulations() {
            if (animationRunning) return;
            animationRunning = true;
            runButton.disabled = true;
            runButton.textContent = 'æ¨¡æ‹Ÿè¿è¡Œä¸­...';
            
            setupVisualizations();
            chart.data.datasets[0].data = [0, 0, 0];
            chart.update();
            await sleep(500);

            const [ops1, ops2, ops3] = await Promise.all([runAlgo1(), runAlgo2(), runAlgo3()]);
            
            chart.data.datasets[0].data = [ops1, ops2, ops3];
            chart.update();

            animationRunning = false;
            runButton.disabled = false;
            runButton.textContent = 'é‡æ–°å¯åŠ¨æ¨¡æ‹Ÿ';
        }

        sizeSlider.addEventListener('input', (e) => {
            dataSize = parseInt(e.target.value);
            sizeValue.textContent = dataSize;
            if (!animationRunning) {
                setupVisualizations();
            }
        });

        runButton.addEventListener('click', runAllSimulations);

        setupVisualizations();
        createChart();
    });
    </script>
</body>
</html>


